<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Vodafone Cards | تسجيل الدخول</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap');
        * { margin:0; padding:0; box-sizing:border-box; font-family:'Cairo',sans-serif; }

        body {
            min-height: 100vh;
            background: #000000;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 15px;
            position: relative;
        }
        body::before {
            content: '';
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: radial-gradient(circle at 20% 50%, rgba(255,0,0,0.15) 0%, transparent 50%),
                        radial-gradient(circle at 80% 50%, rgba(255,0,0,0.15) 0%, transparent 50%);
            z-index: -1;
        }
        .stars {
            position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background-image:
                radial-gradient(2px 2px at 20px 30px, #ff9999, rgba(0,0,0,0)),
                radial-gradient(2px 2px at 40px 70px, #ff6666, rgba(0,0,0,0)),
                radial-gradient(2px 2px at 80px 120px, #ff3333, rgba(0,0,0,0)),
                radial-gradient(2px 2px at 160px 50px, #ff0000, rgba(0,0,0,0)),
                radial-gradient(2px 2px at 300px 200px, #ff6666, rgba(0,0,0,0));
            background-repeat: repeat;
            z-index: -1; opacity: 0.3; pointer-events: none;
        }
        .secret-menu { position: fixed; top: 20px; left: 20px; z-index: 1000; }
        .menu-icon {
            width: 40px; height: 40px;
            display: flex; flex-direction: column; justify-content: center; gap: 8px;
            cursor: pointer; padding: 8px;
            background: rgba(30,0,0,0.8); border: 2px solid #660000; border-radius: 10px;
            transition: all 0.3s ease;
        }
        .menu-icon:hover { background: rgba(50,0,0,0.9); border-color: #ff0000; transform: scale(1.1); }
        .menu-icon .line { width: 100%; height: 3px; background: #ff0000; border-radius: 3px; }
        .menu-icon:hover .line { background: #ff6666; box-shadow: 0 0 10px #ff0000; }

        .dev-modal-overlay {
            position: fixed; top:0; left:0; right:0; bottom:0;
            background: rgba(0,0,0,0.9); backdrop-filter: blur(10px);
            z-index: 2000; display: flex; align-items: center; justify-content: center; padding: 20px;
            opacity: 0; visibility: hidden; transition: all 0.3s ease;
        }
        .dev-modal-overlay.active { opacity: 1; visibility: visible; }
        .dev-modal {
            background: rgba(10,10,10,0.95); border: 3px solid #ff0000; border-radius: 40px;
            padding: clamp(25px,6vw,50px); max-width: 450px; width: 100%;
            box-shadow: 0 0 60px rgba(255,0,0,0.5);
            transform: scale(0.9); transition: transform 0.3s ease; text-align: center;
        }
        .dev-modal-overlay.active .dev-modal { transform: scale(1); }
        .dev-modal-icon { font-size: 60px; color: #ff0000; margin-bottom: 20px; }
        .dev-modal-title { font-size: 32px; font-weight: 900; color: #ff0000; margin-bottom: 15px; }
        .dev-modal-input {
            width: 100%; padding: 15px 20px;
            background: rgba(30,0,0,0.8); border: 2px solid #660000; border-radius: 20px;
            font-size: 16px; color: white; margin: 20px 0; direction: ltr; text-align: center;
        }
        .dev-modal-input:focus { outline: none; border-color: #ff0000; box-shadow: 0 0 20px rgba(255,0,0,0.3); }
        .dev-modal-buttons { display: flex; gap: 15px; margin-top: 20px; }
        .dev-modal-btn {
            flex: 1; padding: 15px; border-radius: 20px; font-size: 16px; font-weight: 900;
            cursor: pointer; border: none; transition: all 0.3s ease;
            display: flex; align-items: center; justify-content: center; gap: 10px;
        }
        .dev-modal-btn.confirm { background: #cc0000; color: white; border: 2px solid #ff0000; }
        .dev-modal-btn.confirm:hover { background: #ff0000; transform: translateY(-3px); }
        .dev-modal-btn.cancel { background: #1a0000; color: #ff9999; border: 2px solid #660000; }

        .login-card {
            background: rgba(10,10,10,0.95); backdrop-filter: blur(10px);
            border: 2px solid rgba(255,0,0,0.3); border-radius: 40px;
            box-shadow: 0 0 50px rgba(255,0,0,0.2);
            width: 100%; max-width: 500px;
            padding: clamp(25px,6vw,50px) clamp(20px,5vw,40px);
            position: relative; z-index: 2;
        }
        .header { text-align: center; margin-bottom: clamp(20px,5vw,40px); }
        .logo-image {
            width: clamp(80px,20vw,120px); height: auto; margin-bottom: 15px;
            border-radius: 30px; box-shadow: 0 0 30px rgba(255,0,0,0.8);
            border: 2px solid #ff0000;
        }
        .header h1 { color: white; font-size: clamp(28px,7vw,42px); font-weight: 900; margin-top: 10px; text-shadow: 0 0 20px rgba(255,0,0,0.7); }
        .header .subtitle { color: #ff6666; font-size: clamp(14px,4vw,18px); margin-top: 8px; font-weight: 600; }
        .input-group { margin-bottom: 20px; width: 100%; }
        .input-label { display: block; color: #ffaaaa; font-size: clamp(12px,3.5vw,14px); font-weight: 700; margin-bottom: 8px; text-align: right; }
        .input-label i { color: #ff0000; margin-left: 5px; }
        .input-wrapper { position: relative; width: 100%; }
        .input-icon { position: absolute; right: 15px; top: 50%; transform: translateY(-50%); color: #ff0000; font-size: clamp(16px,4vw,20px); z-index: 2; pointer-events: none; }
        .input-field {
            width: 100%; padding: clamp(12px,3.5vw,18px) 45px clamp(12px,3.5vw,18px) 15px;
            background: rgba(30,0,0,0.8); border: 2px solid #660000; border-radius: 20px;
            font-size: clamp(14px,3.5vw,16px); color: white; transition: all 0.3s ease; direction: ltr;
        }
        .input-field:focus { outline: none; border-color: #ff0000; background: rgba(50,0,0,0.9); box-shadow: 0 0 20px rgba(255,0,0,0.3); }
        .password-wrapper { position: relative; }
        .password-wrapper .input-field { padding-left: 45px; }
        .toggle-password {
            position: absolute; left: 10px; top: 50%; transform: translateY(-50%);
            background: transparent; border: none; color: #ff0000;
            font-size: clamp(18px,4.5vw,22px); cursor: pointer; z-index: 3; padding: 8px;
        }
        .login-btn {
            width: 100%; padding: clamp(12px,3.5vw,18px);
            background: #cc0000; border: none; border-radius: 20px;
            color: white; font-size: clamp(16px,5vw,20px); font-weight: 900;
            cursor: pointer; margin: 25px 0 15px;
            display: flex; align-items: center; justify-content: center; gap: 10px;
            transition: all 0.3s ease; box-shadow: 0 10px 20px rgba(255,0,0,0.3);
        }
        .login-btn:hover { background: #ff0000; transform: translateY(-3px); }
        .login-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
        .message { padding: clamp(10px,3vw,15px); border-radius: 15px; font-size: clamp(12px,3.5vw,14px); display: flex; align-items: center; gap: 10px; border: 2px solid; margin: 10px 0; }
        .message.error { background: rgba(139,0,0,0.2); border-color: #ff0000; color: #ffaaaa; }
        .message.success { background: rgba(0,100,0,0.2); border-color: #00ff00; color: #aaffaa; }
        .loading-bar { width: 100%; height: 4px; background: #330000; border-radius: 4px; margin: 15px 0; overflow: hidden; display: none; }
        .loading-bar.active { display: block; }
        .loading-progress { width: 0%; height: 100%; background: linear-gradient(90deg, #ff6666, #ff0000, #ff6666); animation: loading 1.5s ease-in-out infinite; }
        @keyframes loading { 0%{width:0%;margin-left:0%} 50%{width:100%;margin-left:0%} 100%{width:0%;margin-left:100%} }
        .info-text { text-align: center; color: #993333; font-size: clamp(11px,3vw,13px); margin: 15px 0; display: flex; align-items: center; justify-content: center; gap: 8px; }
        .dots { display: flex; justify-content: center; gap: 8px; margin: 20px 0; }
        .dot { width: clamp(6px,2vw,8px); height: clamp(6px,2vw,8px); background: #ff0000; border-radius: 50%; box-shadow: 0 0 15px #ff0000; }
        .footer { margin-top: 20px; padding-top: 20px; border-top: 2px dashed rgba(255,0,0,0.3); text-align: center; }
        .footer p { color: #ff9999; font-size: clamp(13px,3.5vw,15px); display: flex; align-items: center; justify-content: center; gap: 8px; }
        .footer .developer { color: #ff0000; font-weight: 900; }
        .bottom-loader { position: fixed; bottom: 0; left: 0; right: 0; height: 4px; background: #330000; z-index: 9999; }
        .bottom-loader .loader-bar { height: 100%; width: 0%; background: linear-gradient(90deg, #ff0000, #ff6666, #ff0000); transition: width 0.1s linear; }
    </style>
</head>
<body>
    <div class="secret-menu">
        <div class="menu-icon" onclick="openDevModal()">
            <div class="line"></div>
            <div class="line"></div>
            <div class="line"></div>
        </div>
    </div>

    <div class="dev-modal-overlay" id="devModal">
        <div class="dev-modal">
            <div class="dev-modal-icon"><i class="fas fa-user-secret"></i></div>
            <div class="dev-modal-title">الغرفة السرية</div>
            <input type="password" id="devPassword" class="dev-modal-input" placeholder="كلمة سر المطور" dir="ltr">
            <div id="devMessage" style="color:#ff6666;font-size:14px;margin:10px 0;"></div>
            <div class="dev-modal-buttons">
                <button class="dev-modal-btn cancel" onclick="closeDevModal()"><i class="fas fa-times"></i> إلغاء</button>
                <button class="dev-modal-btn confirm" onclick="loginToDevRoom()"><i class="fas fa-sign-in-alt"></i> دخول</button>
            </div>
        </div>
    </div>

    <div class="bottom-loader"><div class="loader-bar" id="progressBar"></div></div>
    <div class="stars"></div>

    <div class="login-card">
        <div class="header">
            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/ac/Vodafone_logo.svg/1200px-Vodafone_logo.svg.png" alt="Vodafone" class="logo-image">
            <h1>Vodafone Cards</h1>
            <div class="subtitle">⌯ Virus Net ⌯</div>
        </div>

        <div class="input-group">
            <label class="input-label"><i class="fas fa-phone"></i> رقم الهاتف</label>
            <div class="input-wrapper">
                <i class="fas fa-mobile-alt input-icon"></i>
                <input type="text" id="number" class="input-field" placeholder="01XXXXXXXXX">
            </div>
        </div>

        <div class="input-group">
            <label class="input-label"><i class="fas fa-lock"></i> كلمة المرور</label>
            <div class="password-wrapper">
                <i class="fas fa-key input-icon"></i>
                <input type="password" id="password" class="input-field" placeholder="••••••••">
                <button type="button" class="toggle-password" onclick="togglePass()">
                    <i class="fas fa-eye" id="toggleIcon"></i>
                </button>
            </div>
        </div>

        <div id="messageContainer"></div>
        <div class="loading-bar" id="loadingBar"><div class="loading-progress"></div></div>

        <button id="loginBtn" class="login-btn" onclick="handleLogin()">
            <i class="fas fa-sign-in-alt"></i> دخول
        </button>

        <div class="info-text"><i class="fas fa-shield-alt"></i><span>بياناتك آمنة ومشفرة</span></div>
        <div class="dots"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>
        <div class="footer">
            <p><i class="fas fa-heart"></i><span class="developer">⌯ Virus Net ⌯</span><i class="fas fa-heart"></i></p>
        </div>
    </div>

    <script>
        const DEV_PASSWORD = 'mm';
        const CLIENT_SECRET = '95fd95fb-7489-4958-8ae6-d31a525cd20a';
        const CLIENT_ID = 'ana-vodafone-app';

        // Progress bar
        let pv = 0;
        setInterval(() => { pv = (pv+1)%100; document.getElementById('progressBar').style.width = pv+'%'; }, 150);

        function openDevModal() { document.getElementById('devModal').classList.add('active'); }
        function closeDevModal() { document.getElementById('devModal').classList.remove('active'); }

        function loginToDevRoom() {
            const pass = document.getElementById('devPassword').value;
            const msg = document.getElementById('devMessage');
            if (!pass) { msg.innerHTML = '❌ الرجاء إدخال كلمة السر'; return; }
            if (pass === DEV_PASSWORD) {
                msg.innerHTML = '✅ جاري الدخول...';
                setTimeout(() => { window.location.href = 'dev_room.html'; }, 800);
            } else {
                msg.innerHTML = '❌ كلمة سر المطور غير صحيحة';
            }
        }

        function togglePass() {
            const p = document.getElementById('password');
            const i = document.getElementById('toggleIcon');
            if (p.type === 'password') { p.type = 'text'; i.className = 'fas fa-eye-slash'; }
            else { p.type = 'password'; i.className = 'fas fa-eye'; }
        }

        async function handleLogin() {
            const number = document.getElementById('number').value.replace(/[^0-9]/g,'');
            const password = document.getElementById('password').value;
            const btn = document.getElementById('loginBtn');
            const msgContainer = document.getElementById('messageContainer');
            const loading = document.getElementById('loadingBar');

            if (!number || !password) {
                msgContainer.innerHTML = '<div class="message error"><i class="fas fa-exclamation-triangle"></i> الرجاء إدخال رقم الهاتف وكلمة المرور</div>';
                return;
            }

            msgContainer.innerHTML = '';
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> جاري تسجيل الدخول...';
            btn.disabled = true;
            loading.classList.add('active');

            try {
                const params = new URLSearchParams({
                    grant_type: 'password',
                    username: number,
                    password: password,
                    client_secret: CLIENT_SECRET,
                    client_id: CLIENT_ID
                });

                const response = await fetch('https://mobile.vodafone.com.eg/auth/realms/vf-realm/protocol/openid-connect/token', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                        'User-Agent': 'okhttp/4.12.0',
                        'silentLogin': 'true',
                        'x-agent-operatingsystem': '12',
                        'clientId': 'AnaVodafoneAndroid',
                        'Accept-Language': 'ar',
                        'x-agent-device': 'OPPO CPH2269',
                        'x-agent-version': '2026.1.1',
                        'digitalId': '2BAHQLYBA586V',
                        'device-id': '541638b6a176538c'
                    },
                    body: params.toString()
                });

                const data = await response.json();

                if (response.ok && data.access_token) {
                    sessionStorage.setItem('vodafone_token', data.access_token);
                    sessionStorage.setItem('vodafone_number', number);
                    sessionStorage.setItem('login_time', Date.now());

                    msgContainer.innerHTML = '<div class="message success"><i class="fas fa-check-circle"></i> تم تسجيل الدخول بنجاح... جاري التحويل</div>';
                    setTimeout(() => { window.location.href = 'cards.html'; }, 1200);
                } else {
                    throw new Error('فشل تسجيل الدخول - تحقق من البيانات');
                }
            } catch (e) {
                loading.classList.remove('active');
                msgContainer.innerHTML = `<div class="message error"><i class="fas fa-exclamation-triangle"></i> ${e.message}</div>`;
                btn.innerHTML = '<i class="fas fa-sign-in-alt"></i> دخول';
                btn.disabled = false;
            }
        }
    </script>
</body>
</html>
